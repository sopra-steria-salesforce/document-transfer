<!-- Code by CafeForce || www.cafeforce.com || support@cafeforce.com || Mandatory Header -->

<template>
    <div class="slds-box slds-p-top_small" style="background-color: white; position: relative;">
        <template if:true={showSpinner}>
            <lightning-spinner alternative-text="Loading" class="spinnerClass" size="medium"></lightning-spinner>
        </template>
        <div class="slds-text-heading_medium head">
            <lightning-icon alternative-text="Upload files" class="slds-m-right_small" icon-name="doctype:link"
                            title="Approved"></lightning-icon>
            Contract Upload
        </div>
        <br/>
            <div>
                <div if:false={navisionCheck}>
                    Customer is pending creation in Navision. Please wait... <br/>
                </div>
                <div if:true={navisionCheck}>
                <div if:false={showConditionalSection}>
                <div if:false={isContractUploaded}>
                    The contract upload is moved to the Hub in ServiceNow.<br/>
                    Please follow the link below and upload signed contract and attachments.<br/><br/>
                    The Opportunity stage changes to "closed won" when contract is approved by the contract management
                    team.
                    <br/>
                    <br/>
                    <div if:true={contractServiceNowUrl}>
                    <lightning-button class="slds-m-top_medium slds-m-bottom_medium" variant="brand" label="Contract upload in The Hub"
                                      onclick={handleClick}></lightning-button>
                    </div>
                    <div if:false={contractServiceNowUrl}>
                        <lightning-button class="slds-m-top_medium slds-m-bottom_medium" label="Click here for link"
                                          onclick={handleRefresh}></lightning-button>
                    </div>

                </div>
                <div if:true={isContractUploaded}>
                    Thank you for uploading the contract. Please contact the contract management team if
                    you have questions.<br/><br/>

                    For Norway and Denmark: contracts@soprasteria.com<br/><br/>

                    Sweden: contracts.SE@soprasteria.com
                    <br/>
                </div>
                    </div>
                    <div if:true={showConditionalSection}>
                        An error has occurred. Please refresh in a couple of minutes. If the error still occurs, Click "Report Contract Problem" button to report the problem.
                    </div>
            </div>
            </div>

    </div>


</template>

<!-- Code by CafeForce 
     Website: http://www.cafeforce.com 
     DO NOT REMOVE THIS HEADER/FOOTER FOR FREE CODE USAGE 
-->